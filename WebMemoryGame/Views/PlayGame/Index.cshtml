
@{
    ViewBag.Title = "Memory Game";
    Layout = "~/Views/PlayGame/_LayoutPlay.cshtml";
}
<div class="content">
    <h2>@ViewBag.Naslov</h2>
    @if (!ViewBag.Login)
    {
        <p>
            @Html.ActionLink("Региструј се", "Register", "PlayGame")
        </p>
        <p>
            @Html.ActionLink("Пријави се", "Login", "PlayGame")
        </p>
    }
    else
    {
        <p>
            @Html.ActionLink("Одјави се", "Logout", "PlayGame")
        </p>
        <p>
            @Html.Label("lblVreme", "Протекло време")
            @Html.Label("TimeOfGame", "00:00", new { id = "lblTOG" })
        </p>
        if (ViewBag.Start)
        {
        <p>
            @Html.ActionLink("Заустави игру", "StopGame", "PlayGame", new {@*onclick = "zaustaviIgru();"*@})
            
            <script>
                var interval;
                interval = setInterval(function () {
                    $.get("./PlayGame/GameTimer", function (data) {
                        if (data ==="STOP") {
                            window.location.reload();
                        }
                        else {
                            $("#lblTOG").html(data);
                        }
                    });

                }, 1000);
            </script>
        </p>
        }
        else
        {
            <p>
                <script>
                    var interval;
                    clearInterval(interval);                  
                </script>
                @Html.ActionLink("Почни игру", "StartGame", "PlayGame", new { @*onclick = "pokreniIgru();"*@ })
            </p>
        }
        <table>
            @for (var i = 0; i < ViewBag.Nivo; i++)
            {
                <tr>
                    @for (var j = 0; j < ViewBag.Nivo; j++)
                    {
                        <td><button class="memBtn" id="btn_@((i * ViewBag.Nivo + j).ToString("00"))" onclick="stisniDugme(this);">*</button></td>
                    }
                </tr>
            }
        </table>
    }
</div>
